/*********************************************
	Name: Keymer A. Botero and Zailuj Hernadez
	Class: CIS-161 ME1
	Date: October 19th, 2017
	Due Date: October 25th, 2017
	Program Name: Project 3 - Quiz Statistics
	Description: This program reads a list of
	Students, from their four-digit IDs. and 
	each of their three quizzes that they have 
	taken during the term. In addition, the 
	program will calculate an average based on 
	the three quizzes and all the data is kept
	on a text file name "pr2data"
***********************************************/

#include <iostream>
#include <iomanip>
#include <fstream>

using namespace std;

const int LIST = 50;

typedef int intarray[LIST];
typedef float farray[LIST];

int getdata(intarray, intarray ,farray, farray, farray, ifstream &);
int findhigh(int, farray);
int findlow(int, farray);
float findqzavg(int, farray);
void findstavg(int, intarray, farray, farray, farray, farray);
void printall(intarray, intarray, intarray, farray, farray,farray,farray,farray, int);

int main()
{
	intarray studidnum, num, highquiz, lowquiz;
	farray quiz1, quiz2, quiz3, stavg, avgquiz;
	//______
	int numofelements;
	ifstream fin("pr2data.txt");
	if (!fin)
       cout << "File does not exist or is not open " << endl;
    else
		{
			numofelements = getdata (num, studidnum, quiz1, quiz2, quiz3, fin);
//			cout << numofelements << " elements " << endl;
		
			highquiz[0]=findhigh(numofelements, quiz1);
			lowquiz[0]=findlow(numofelements, quiz1);
			avgquiz[0]=findqzavg(numofelements, quiz1);
			
			highquiz[1]=findhigh(numofelements, quiz2);
			lowquiz[1]=findlow(numofelements, quiz2);
			avgquiz[1]= findqzavg(numofelements, quiz2);
			
			
			highquiz[2]=findhigh(numofelements, quiz3);
			lowquiz[2]=findlow(numofelements, quiz3);
			avgquiz[2]= findqzavg(numofelements, quiz3);
			
			findstavg(numofelements, studidnum, quiz1, quiz2, quiz3, stavg);
			printall(studidnum, highquiz, lowquiz, quiz1,quiz2,quiz3, avgquiz, stavg, numofelements);
		}
	
	
	return 0;
}

/*
		The purpose of this function is read the id number for each 
		student and the three quizzes that each student received. 
		In addition, other functions will refer to this function to 
		calculate a student's average, highest and lowest scores, and 
		etc. The function will not create any new data and will only 
		accept new data from the given text file.
*/

int getdata(intarray num, intarray studidnum, farray quiz1, farray quiz2, farray quiz3, ifstream &fin)
{	
	int i = 0;
	while ( fin >> studidnum[i])
     	{
     	//cout << studidnum[i]<< endl;
	fin >> quiz1[i];
		// cout << quiz1[i] << endl;
	fin >> quiz2[i];
		// cout << quiz2[i] << endl;
	fin >> quiz3[i];	
		//cout << quiz3[i]<< endl;
	i++;
		 }
	return i-1;	
}

/* 		FIND HIGHEST SCORE
	This function will take the students' test scores
	and pick out the value that is the highest. It can be
	reused to find highest score of multiple quizzes.
*/

int findhigh(int numofelements, farray quiz)
{
int large= quiz[0];
for (int i=0; i < numofelements; i++)
{
	if (quiz[i] >= large)
		{
		large= quiz[i];
		}
}	
//cout << "The largest in the array is " << large << endl;
return large;	
}

/*		FIND LOWEST SCORE
	This function will take the students' test scores
	and pick out the value that is the lowest. It can be
	reused to find the lowest score of multiple quizzes.

*/
int findlow(int numofelements, farray quiz)
{
	
int small= quiz[0];
for (int i=0; i < numofelements; i++)
{
	while ((quiz[i] < small) && (quiz[i] > 0))
		{
		small= quiz[i];
		}
				
}
//cout << "The smallest in the array is " << small << endl;
return small;
}


/*		FIND QUIZ AVERAGE
	This function will take a class's quiz values and find the
	total class average. It will do this by totaling up each student's 
	quiz result and then dividing it by the number of quiz results.
	This function is reusable and can be called to find multiple
	quiz averages.
	
*/
float  findqzavg(int numofelements, farray quiz)
{
float sum, avg;
for (int i=0; i < numofelements; i++)
	{
		sum+=quiz[i];	
	}
//cout << "Current sum: " << sum << endl;

avg= (sum/numofelements);
// cout << "Average: " << avg << endl;
return avg;
}

/* 		FIND STUDENT AVERAGE
	This function will calculate each individual student's average by
	taking their three test grades and dividing it by 3. It will then
	store the averages.
*/
void findstavg(int numofelements, intarray studentid, farray quiz1, farray quiz2, farray quiz3, farray stavg)
{
farray sum;	// this array will hold the sums of the student's 3 test grades
for (int i=0; i <= numofelements; i++)
{
//	cout << "STUDENT ID: " << studentid[i] << endl;
	sum[i]= (quiz1[i] +quiz2[i] + quiz3[i]);
//	cout << "Sum: " << sum[i] << endl;
	stavg[i]= sum[i]/3;
//	cout << "Student Average: " << stavg[i] << endl;
}		
}

/*
		The purpose of this function is print the data so that user
		may be able to view a student's ID number, their three 
		quiz scores, and their average of the three quizzes. In
		addition, it will only read data from the function "getdata"
		and will not create any new data. 
*/
void printall(intarray studidnum, intarray highquiz, intarray lowquiz, farray quiz1,farray quiz2, farray quiz3, farray avgquiz, farray stavg, int cntelements)
{
		cout << "\t\tCIS Department - Fall 2017\n\t\t CIS 161 Class Statistics\n";
		cout << "\t\t==========================\n\n\n";
		cout << "Student"<<"       "<<"Quiz 1"<<"    "<<"Quiz 2" <<"    "<<"Quiz 3"<<"    "<<"Average"<<"     "<<"" << endl;
		cout << "-------"<<"       "<<"------"<<"    "<<"------" <<"    "<<"------"<<"    "<< "------"<<"     "<<"" <<endl;
		for(int i = 0; i < cntelements; i++)
		{
			cout << left<<setw(6)<<studidnum[i]<<right<<setw(12) <<quiz1[i]<<right<<setw(12) <<quiz2[i];
			cout << right<<setw(10) <<quiz3[i]<<right<<setw(12);
			cout << fixed<<showpoint<<setprecision(2);
			cout << right<<setw(10) << stavg[i]<<right<<setw(12) << endl;
			cout << noshowpoint << setprecision(0);
		}
		cout << left<<setw(6) << "High Score" << right << setw(8) << highquiz[0] << right << setw(12) << highquiz[1];
		cout << right << setw(10) << highquiz[2]<<endl;
		cout << left<<setw(6) << "Low Score" << right << setw(9) << lowquiz[0] << right << setw(12) << lowquiz[1];
		cout << right << setw(10) << lowquiz[2]<<endl;
		cout << fixed<<showpoint<<setprecision(2);
		cout << left<<setw(6) << "Quiz Average" << right << setw(8) << avgquiz[0] << right << setw(12) << avgquiz[1];
		cout << right << setw(10) << avgquiz[2]<<endl;
}
